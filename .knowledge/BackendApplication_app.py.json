{"is_source_file": true, "format": "Python", "description": "Source code for a Flask-based backend API managing devices, including endpoints for health checks, device CRUD operations, status checks, and API documentation.", "external_files": ["flask", "flask_cors", "pymongo"], "external_methods": ["Flask()", "jsonify()", "request.get_json()", "CORS()", "MongoClient()", "datetime.utcnow()", "errors", "find_device_by_any_id()", "serialize_device()", "error_response()", "get_openapi_spec()", "is_ipv4()", "ping_host()", "validate_device_payload()"], "published": ["create_app"], "classes": [], "methods": [{"name": "create_app()", "description": "Creates and configures the Flask application with all route handlers and middleware.", "scope": "", "scopeKind": ""}, {"name": "bool is_ipv4(val: str)", "description": "Checks if a string is a valid IPv4 address.", "scope": "", "scopeKind": ""}, {"name": "bool ping_host(host: str, timeout: float = 2.0)", "description": "Attempts to ping a host with a specified timeout to determine reachability.", "scope": "", "scopeKind": ""}, {"name": "Tuple[bool,str] validate_device_payload(payload: dict, require_status: bool)", "description": "Validates the payload data for device creation and update API requests.", "scope": "", "scopeKind": ""}, {"name": "dict serialize_device(doc: dict)", "description": "Serializes a MongoDB device document into API response format.", "scope": "", "scopeKind": ""}, {"name": "init_db()", "description": "Initializes MongoDB connection using environment variables.", "scope": "", "scopeKind": ""}, {"name": "get_openapi_spec()", "description": "Generates a minimal OpenAPI specification for the defined endpoints.", "scope": "", "scopeKind": ""}, {"name": "error_response(message: str, status: int = 400)", "description": "Returns a standardized JSON error response with a specific HTTP status code.", "scope": "", "scopeKind": ""}, {"name": "api_root()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "create_device()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "delete_device(id)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "device_status(id)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "docs()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "get_device(id)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "health()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "list_devices()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "openapi()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "update_device(id)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}], "calls": ["app.run()", "db.devices.create_index()", "db.admin.command('ping')", "list(db.devices.find({}))", "db.devices.insert_one()", "db.devices.find_one()", "db.devices.update_one()", "db.devices.delete_one()", "db.devices.update_one()", "db.devices.find_one()", "datetime.utcnow()", "os.getenv()", "platform.system()", "subprocess.run()"], "search-terms": ["Flask", "device API", "MongoDB device management", "status check endpoint", "create_app function", "device validation", "ping host", "device serialization"], "state": 2, "file_id": 7, "knowledge_revision": 24, "git_revision": "02a0045a9a199c290f891f4929054da9c3ffcfa9", "revision_history": [{"15": ""}, {"22": "02a0045a9a199c290f891f4929054da9c3ffcfa9"}, {"24": "02a0045a9a199c290f891f4929054da9c3ffcfa9"}], "ctags": [{"_type": "tag", "name": "MongoClient", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    MongoClient = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "api_root", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def api_root():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    app = create_app()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_app", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def create_app():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create_device", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def create_device():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "delete_device", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def delete_device(id):$/", "file": true, "language": "Python", "kind": "function", "signature": "(id)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "device_status", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def device_status(id):$/", "file": true, "language": "Python", "kind": "function", "signature": "(id)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "docs", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def docs():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "error_response", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def error_response(message: str, status: int = 400):$/", "language": "Python", "kind": "function", "signature": "(message: str, status: int = 400)"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    errors = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_device", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def get_device(id):$/", "file": true, "language": "Python", "kind": "function", "signature": "(id)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "get_openapi_spec", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def get_openapi_spec():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def health():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def init_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "is_ipv4", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def is_ipv4(val: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(val: str)"}, {"_type": "tag", "name": "list_devices", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def list_devices():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "openapi", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def openapi():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "ping_host", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def ping_host(host: str, timeout: float = 2.0) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(host: str, timeout: float = 2.0)"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    port = int(os.getenv(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "serialize_device", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def serialize_device(doc: dict) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(doc: dict)"}, {"_type": "tag", "name": "update_device", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^    def update_device(id):$/", "file": true, "language": "Python", "kind": "function", "signature": "(id)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "validate_device_payload", "path": "/home/kavia/workspace/code-generation/containerized-network-management-6128-5252/BackendApplication/app.py", "pattern": "/^def validate_device_payload(payload: dict, require_status: bool) -> Tuple[bool, str]:$/", "language": "Python", "typeref": "typename:Tuple[bool,str]", "kind": "function", "signature": "(payload: dict, require_status: bool)"}], "hash": "493f2c562a49fab537265eab876bf40f", "format-version": 4, "code-base-name": "BackendApplication", "filename": "BackendApplication/app.py", "fields": [{"name": "MongoClient = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = create_app()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "errors = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.getenv(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}]}